<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exchange Balance æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #10b981; font-weight: bold; }
        .error { color: #ef4444; font-weight: bold; }
        .warning { color: #f59e0b; font-weight: bold; }
        pre {
            background: #1f2937;
            color: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 12px;
        }
        .refresh-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .refresh-btn:hover { background: #2563eb; }
    </style>
</head>
<body>
    <h1>ğŸ” Exchange Balance Card è°ƒè¯•æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>1ï¸âƒ£ å‰ç«¯é¡µé¢æ£€æŸ¥</h2>
        <p>è®¿é—®: <a href="http://192.168.0.54:3000" target="_blank">http://192.168.0.54:3000</a></p>
        <p>ç„¶åæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å° (F12)ï¼Œåº”è¯¥çœ‹åˆ°æ¯ 5 ç§’çš„åŒæ­¥æ—¥å¿—</p>
    </div>

    <div class="test-section">
        <h2>2ï¸âƒ£ åç«¯ API æµ‹è¯•</h2>
        <button class="refresh-btn" onclick="testBackendAPI()">ğŸ”„ æµ‹è¯•åç«¯ API</button>
        <div id="api-result"></div>
    </div>

    <div class="test-section">
        <h2>3ï¸âƒ£ æ–‡ä»¶éƒ¨ç½²æ£€æŸ¥</h2>
        <button class="refresh-btn" onclick="checkDeployment()">ğŸ” æ£€æŸ¥éƒ¨ç½²æ–‡ä»¶</button>
        <div id="deploy-result"></div>
    </div>

    <div class="test-section">
        <h2>4ï¸âƒ£ å®æ—¶æ§åˆ¶å°æ—¥å¿—</h2>
        <p>æ‰“å¼€ä¸»é¡µé¢åï¼Œä½ åº”è¯¥åœ¨æ§åˆ¶å°çœ‹åˆ°ï¼š</p>
        <pre>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ExchangeSync] ğŸ¬ ç»„ä»¶æŒ‚è½½ | Component mounted
[ExchangeSync] é…ç½®æ£€æŸ¥:
  - USE_BACKEND: true
  - API_BASE_URL: http://192.168.0.54:3000
  - SYNC_INTERVAL: 5000 ms
[ExchangeSync] âœ… å¯åŠ¨è‡ªåŠ¨åŒæ­¥...
[ExchangeSync] ğŸš€ å¼€å§‹åŒæ­¥ | Starting sync...
[ExchangeSync] ğŸŒ è¯·æ±‚ okx ä½™é¢:
  å®Œæ•´URL: http://192.168.0.54:3000/api/exchange/okx/balance
[ExchangeSync] ğŸ“¡ å“åº”çŠ¶æ€: 200 OK
[ExchangeSync] âœ… okx: 3 ä¸ªèµ„äº§
[ExchangeSync] âœ… åŒæ­¥å®Œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</pre>
    </div>

    <div class="test-section">
        <h2>5ï¸âƒ£ é¢„æœŸæ˜¾ç¤ºæ•ˆæœ</h2>
        <p>åœ¨ Dashboard é¡µé¢ï¼Œä½ åº”è¯¥çœ‹åˆ°ç´«è‰²çš„ <strong>Exchange Balances</strong> å¡ç‰‡ï¼š</p>
        <ul>
            <li>âœ… Backend Enabled: true</li>
            <li>âœ… API URL: http://192.168.0.54:3000</li>
            <li>ğŸŸ¢ Ready</li>
            <li>Balances Count: 3</li>
            <li>æ˜¾ç¤º XAUT, BTC, USDT ä¸‰ä¸ªå¸ç§</li>
        </ul>
    </div>

    <script>
        async function testBackendAPI() {
            const resultDiv = document.getElementById('api-result');
            resultDiv.innerHTML = '<p>â³ æµ‹è¯•ä¸­...</p>';
            
            try {
                const response = await fetch('http://192.168.0.54:3000/api/exchange/okx/balance');
                const data = await response.json();
                
                let html = '<h3 class="success">âœ… åç«¯ API æ­£å¸¸å·¥ä½œï¼</h3>';
                html += '<p><strong>çŠ¶æ€ç :</strong> ' + response.status + '</p>';
                html += '<p><strong>èµ„äº§æ•°é‡:</strong> ' + data.count + '</p>';
                html += '<h4>è¿”å›æ•°æ®:</h4>';
                html += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                if (data.count === 3) {
                    html += '<p class="success">âœ… æ”¶åˆ° 3 ä¸ªèµ„äº§ï¼Œç¬¦åˆé¢„æœŸï¼</p>';
                } else {
                    html += '<p class="warning">âš ï¸ èµ„äº§æ•°é‡: ' + data.count + 'ï¼Œé¢„æœŸæ˜¯ 3</p>';
                }
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<h3 class="error">âŒ åç«¯ API é”™è¯¯</h3><pre>' + error + '</pre>';
            }
        }

        async function checkDeployment() {
            const resultDiv = document.getElementById('deploy-result');
            resultDiv.innerHTML = '<p>â³ æ£€æŸ¥ä¸­...</p>';
            
            try {
                // Check if the JS file exists
                const response = await fetch('http://192.168.0.54:3000/assets/index-BOoBFHZV.js', { method: 'HEAD' });
                
                let html = '';
                if (response.ok) {
                    html += '<p class="success">âœ… å…³é”® JS æ–‡ä»¶å·²éƒ¨ç½²</p>';
                    html += '<p><strong>æ–‡ä»¶:</strong> index-BOoBFHZV.js</p>';
                    html += '<p><strong>å¤§å°:</strong> ' + Math.round(response.headers.get('content-length') / 1024) + ' KB</p>';
                } else {
                    html += '<p class="error">âŒ JS æ–‡ä»¶æœªæ‰¾åˆ°</p>';
                }
                
                // Check main page
                const pageResponse = await fetch('http://192.168.0.54:3000/');
                if (pageResponse.ok) {
                    html += '<p class="success">âœ… ä¸»é¡µå¯è®¿é—®</p>';
                } else {
                    html += '<p class="error">âŒ ä¸»é¡µæ— æ³•è®¿é—®</p>';
                }
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<h3 class="error">âŒ æ£€æŸ¥å¤±è´¥</h3><pre>' + error + '</pre>';
            }
        }

        // Auto-test on page load
        window.onload = function() {
            testBackendAPI();
        };
    </script>
</body>
</html>
